http:
  services:
    stats-service:
      loadBalancer:
        servers:
          - url: "http://sidecar:7070"
  
  middlewares:
    stats:
      plugin:
        banan-stats:
          sidecarURL: "http://sidecar:7070"
          dashboardPath: "/stats"
          dashboardToken: ""
          cookieName: "stats_id"
          cookiePath: "/"
          cookieMaxAge: 2147483647
          cookieSecure: false
          cookieHTTPOnly: true
          cookieSameSite: "Lax"
          queueSize: 1024
          flushInterval: "2s"
          batchSize: 100
          bufferPath: "/tmp/banan-stats-buffer.sqlite"
          bufferMaxEvents: 5000
          hostFilterMode: "per-host"

  routers:
    stats:
      rule: "Path(`/stats`) || PathPrefix(`/stats/`)"
      entryPoints:
        - web
      middlewares:
        - stats
      service: stats-service
